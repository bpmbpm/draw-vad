<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARIS Express Clone - Value Added Diagram Editor</title>

    <!-- External libraries via CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.15/themes/default/style.min.css" />
    <link rel="stylesheet" href="styles/main.css">

    <!-- Draw.io integration -->
    <script src="https://www.draw.io/js/viewer.min.js"></script>
</head>
<body>
    <!-- Main application container -->
    <div id="app-container">
        <!-- Menu bar -->
        <div id="menu-bar" class="menu-bar">
            <div class="menu-item" data-menu="file">
                <span>–§–∞–π–ª</span>
                <div class="dropdown-menu" id="file-menu">
                    <a href="#" data-action="new">–°–æ–∑–¥–∞—Ç—å</a>
                    <a href="#" data-action="open">–û—Ç–∫—Ä—ã—Ç—å...</a>
                    <a href="#" data-action="save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</a>
                    <a href="#" data-action="saveas">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫...</a>
                    <hr>
                    <a href="#" data-action="import">–ò–º–ø–æ—Ä—Ç...</a>
                    <a href="#" data-action="export">–≠–∫—Å–ø–æ—Ä—Ç...</a>
                    <hr>
                    <a href="#" data-action="print">–ü–µ—á–∞—Ç—å...</a>
                    <hr>
                    <a href="#" data-action="exit">–í—ã—Ö–æ–¥</a>
                </div>
            </div>

            <div class="menu-item" data-menu="edit">
                <span>–ü—Ä–∞–≤–∫–∞</span>
                <div class="dropdown-menu" id="edit-menu">
                    <a href="#" data-action="undo">–û—Ç–º–µ–Ω–∏—Ç—å</a>
                    <a href="#" data-action="redo">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</a>
                    <hr>
                    <a href="#" data-action="cut">–í—ã—Ä–µ–∑–∞—Ç—å</a>
                    <a href="#" data-action="copy">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</a>
                    <a href="#" data-action="paste">–í—Å—Ç–∞–≤–∏—Ç—å</a>
                    <a href="#" data-action="delete">–£–¥–∞–ª–∏—Ç—å</a>
                    <hr>
                    <a href="#" data-action="selectall">–í—ã–¥–µ–ª–∏—Ç—å –≤—Å–µ</a>
                </div>
            </div>

            <div class="menu-item" data-menu="view">
                <span>–í–∏–¥</span>
                <div class="dropdown-menu" id="view-menu">
                    <a href="#" data-action="zoom-in">–£–≤–µ–ª–∏—á–∏—Ç—å</a>
                    <a href="#" data-action="zoom-out">–£–º–µ–Ω—å—à–∏—Ç—å</a>
                    <a href="#" data-action="zoom-fit">–ü–æ —Ä–∞–∑–º–µ—Ä—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã</a>
                    <a href="#" data-action="zoom-100">100%</a>
                    <hr>
                    <a href="#" data-action="grid">–°–µ—Ç–∫–∞</a>
                    <a href="#" data-action="snap">–ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Å–µ—Ç–∫–µ</a>
                    <hr>
                    <a href="#" data-action="panels">–ü–∞–Ω–µ–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤...</a>
                </div>
            </div>

            <div class="menu-item" data-menu="model">
                <span>–ú–æ–¥–µ–ª—å</span>
                <div class="dropdown-menu" id="model-menu">
                    <a href="#" data-action="new-vad">–ù–æ–≤–∞—è VAD –¥–∏–∞–≥—Ä–∞–º–º–∞</a>
                    <a href="#" data-action="new-epc">–ù–æ–≤–∞—è EPC –¥–∏–∞–≥—Ä–∞–º–º–∞</a>
                    <a href="#" data-action="new-org">–ù–æ–≤–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞</a>
                    <hr>
                    <a href="#" data-action="properties">–°–≤–æ–π—Å—Ç–≤–∞ –º–æ–¥–µ–ª–∏...</a>
                    <a href="#" data-action="validate">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–¥–µ–ª—å</a>
                </div>
            </div>

            <div class="menu-item" data-menu="format">
                <span>–§–æ—Ä–º–∞—Ç</span>
                <div class="dropdown-menu" id="format-menu">
                    <a href="#" data-action="format-shape">–§–æ—Ä–º–∞—Ç —Ñ–∏–≥—É—Ä—ã...</a>
                    <a href="#" data-action="format-line">–§–æ—Ä–º–∞—Ç –ª–∏–Ω–∏–∏...</a>
                    <a href="#" data-action="format-text">–§–æ—Ä–º–∞—Ç —Ç–µ–∫—Å—Ç–∞...</a>
                    <hr>
                    <a href="#" data-action="align">–í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ</a>
                    <a href="#" data-action="distribute">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ</a>
                    <hr>
                    <a href="#" data-action="bring-front">–ù–∞ –ø–µ—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω</a>
                    <a href="#" data-action="send-back">–ù–∞ –∑–∞–¥–Ω–∏–π –ø–ª–∞–Ω</a>
                </div>
            </div>

            <div class="menu-item" data-menu="tools">
                <span>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</span>
                <div class="dropdown-menu" id="tools-menu">
                    <a href="#" data-action="settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏...</a>
                    <a href="#" data-action="configure">–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è...</a>
                </div>
            </div>

            <div class="menu-item" data-menu="help">
                <span>–°–ø—Ä–∞–≤–∫–∞</span>
                <div class="dropdown-menu" id="help-menu">
                    <a href="#" data-action="help-contents">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å–ø—Ä–∞–≤–∫–∏</a>
                    <a href="#" data-action="help-vad">–°–ø—Ä–∞–≤–∫–∞ –ø–æ VAD</a>
                    <a href="#" data-action="help-epc">–°–ø—Ä–∞–≤–∫–∞ –ø–æ EPC</a>
                    <a href="#" data-action="help-bpmn">–°–ø—Ä–∞–≤–∫–∞ –ø–æ BPMN</a>
                    <a href="#" data-action="help-org">–°–ø—Ä–∞–≤–∫–∞ –ø–æ –æ—Ä–≥. —Å—Ö–µ–º–∞–º</a>
                    <hr>
                    <a href="#" data-action="about">–û –ø—Ä–æ–≥—Ä–∞–º–º–µ</a>
                </div>
            </div>
        </div>

        <!-- Toolbar -->
        <div id="toolbar" class="toolbar">
            <div class="tool-group">
                <button class="tool-btn" data-action="new" title="–°–æ–∑–¥–∞—Ç—å">
                    <span>üìÑ</span>
                </button>
                <button class="tool-btn" data-action="open" title="–û—Ç–∫—Ä—ã—Ç—å">
                    <span>üìÇ</span>
                </button>
                <button class="tool-btn" data-action="save" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å">
                    <span>üíæ</span>
                </button>
            </div>

            <div class="tool-separator"></div>

            <div class="tool-group">
                <button class="tool-btn" data-action="undo" title="–û—Ç–º–µ–Ω–∏—Ç—å">
                    <span>‚Ü∂</span>
                </button>
                <button class="tool-btn" data-action="redo" title="–ü–æ–≤—Ç–æ—Ä–∏—Ç—å">
                    <span>‚Ü∑</span>
                </button>
            </div>

            <div class="tool-separator"></div>

            <div class="tool-group">
                <button class="tool-btn" data-action="zoom-in" title="–£–≤–µ–ª–∏—á–∏—Ç—å">
                    <span>üîç+</span>
                </button>
                <button class="tool-btn" data-action="zoom-out" title="–£–º–µ–Ω—å—à–∏—Ç—å">
                    <span>üîç-</span>
                </button>
                <button class="tool-btn" data-action="zoom-fit" title="–ü–æ —Ä–∞–∑–º–µ—Ä—É">
                    <span>‚ä°</span>
                </button>
            </div>
        </div>

        <!-- Main workspace -->
        <div id="workspace" class="workspace">
            <!-- Left panel: Model explorer and stencils -->
            <div id="left-panel" class="panel left-panel">
                <div class="panel-tabs">
                    <button class="panel-tab active" data-panel="explorer">–ü—Ä–æ–≤–æ–¥–Ω–∏–∫</button>
                    <button class="panel-tab" data-panel="stencils">–¢—Ä–∞—Ñ–∞—Ä–µ—Ç—ã</button>
                </div>

                <div id="explorer-panel" class="panel-content active">
                    <div class="panel-header">–ü—Ä–æ–≤–æ–¥–Ω–∏–∫ –º–æ–¥–µ–ª–µ–π</div>
                    <div id="model-tree" class="model-tree">
                        <!-- Model tree will be rendered here -->
                    </div>
                </div>

                <div id="stencils-panel" class="panel-content">
                    <div class="panel-header">–¢—Ä–∞—Ñ–∞—Ä–µ—Ç—ã</div>
                    <div id="stencil-selector" class="stencil-selector">
                        <select id="notation-select">
                            <option value="vad">VAD - Value Added Diagram</option>
                            <option value="epc">EPC - Event-driven Process Chain</option>
                            <option value="org">–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞</option>
                            <option value="bpmn">BPMN</option>
                        </select>
                    </div>
                    <div id="stencil-container" class="stencil-container">
                        <!-- Stencils will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Center panel: Canvas -->
            <div id="canvas-panel" class="panel canvas-panel">
                <div class="canvas-header">
                    <div class="canvas-title">–ù–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞</div>
                    <div class="canvas-info">
                        <span id="zoom-level">100%</span>
                    </div>
                </div>
                <div id="diagram-canvas" class="diagram-canvas">
                    <!-- Draw.io canvas will be embedded here -->
                    <div id="drawio-container"></div>
                </div>
            </div>

            <!-- Right panel: Properties -->
            <div id="right-panel" class="panel right-panel">
                <div class="panel-header">–°–≤–æ–π—Å—Ç–≤–∞</div>
                <div id="properties-container" class="properties-container">
                    <div class="property-section">
                        <h3>–°–≤–æ–π—Å—Ç–≤–∞ –æ–±—ä–µ–∫—Ç–∞</h3>
                        <div id="object-properties">
                            <p class="no-selection">–û–±—ä–µ–∫—Ç –Ω–µ –≤—ã–±—Ä–∞–Ω</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status bar -->
        <div id="status-bar" class="status-bar">
            <div class="status-item">
                <span id="status-message">–ì–æ—Ç–æ–≤</span>
            </div>
            <div class="status-item">
                <span id="cursor-position">X: 0, Y: 0</span>
            </div>
        </div>
    </div>

    <!-- Modal dialogs -->
    <div id="modal-container"></div>

    <!-- Configuration file -->
    <script src="config/app-config.js"></script>

    <!-- Domain Layer (DDD) -->
    <script src="js/domain/entities/Diagram.js"></script>
    <script src="js/domain/entities/DiagramElement.js"></script>
    <script src="js/domain/entities/Model.js"></script>
    <script src="js/domain/value-objects/Point.js"></script>
    <script src="js/domain/value-objects/Size.js"></script>
    <script src="js/domain/value-objects/Style.js"></script>
    <script src="js/domain/repositories/IDiagramRepository.js"></script>
    <script src="js/domain/repositories/IModelRepository.js"></script>

    <!-- Application Layer -->
    <script src="js/application/services/DiagramService.js"></script>
    <script src="js/application/services/ModelService.js"></script>
    <script src="js/application/services/NotationService.js"></script>
    <script src="js/application/use-cases/CreateDiagram.js"></script>
    <script src="js/application/use-cases/SaveDiagram.js"></script>
    <script src="js/application/use-cases/LoadDiagram.js"></script>

    <!-- Infrastructure Layer -->
    <script src="js/infrastructure/repositories/DrawioRepository.js"></script>
    <script src="js/infrastructure/persistence/LocalStorageAdapter.js"></script>
    <script src="js/infrastructure/parsers/DrawioXmlParser.js"></script>

    <!-- Presentation Layer -->
    <script src="js/presentation/ui/MenuController.js"></script>
    <script src="js/presentation/ui/ToolbarController.js"></script>
    <script src="js/presentation/ui/CanvasController.js"></script>
    <script src="js/presentation/ui/PropertiesController.js"></script>
    <script src="js/presentation/ui/StencilController.js"></script>
    <script src="js/presentation/ui/HelpController.js"></script>

    <!-- Main application bootstrap -->
    <script src="js/app.js"></script>

    <!-- jQuery and jstree for tree view -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.15/jstree.min.js"></script>
</body>
</html>
